name: Infra Drift Detection

on:
  workflow_dispatch:
  schedule:
    - cron: '00 06 * * *' # Run at 06:00 every day

jobs:
  drift_detection_itn:
    uses: pagopa/dx/.github/workflows/infra_drift_detection.yml@main
    name: Drift Detection Italy North
    secrets: inherit
    with:
      environment: prod
      base_path: 'infra/resources/'
      override_github_environment: 'infra-prod'

  drift_detection_weu:
    uses: pagopa/dx/.github/workflows/infra_drift_detection.yml@main
    name: Drift Detection West Europe
    secrets: inherit
    with:
      environment: prod
      base_path: 'infra/src/'
      override_github_environment: 'infra-prod-ci'
