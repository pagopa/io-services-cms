import { faker } from "@faker-js/faker/locale/it";

export const aMockedIdentityToken =
  "eyJraWQiOiJkNDoxZDo4YzpkOTo4ZjowMDpiMjowNDplOTo4MDowOTo5ODplYzpmODo0Mjo3ZSIsInR5cCI6IkpXVCIsImFsZyI6IlJTMjU2In0.eyJlbWFpbCI6Im0uY3VyaWVAdGVzdC5lbWFpbC5pdCIsImZhbWlseV9uYW1lIjoiQ3VyaWUiLCJmaXNjYWxfbnVtYmVyIjoiQ1JVTVJBNzZTNThBOTQ0ViIsIm5hbWUiOiJNYXJpZSIsImZyb21fYWEiOmZhbHNlLCJ1aWQiOiIyYjEwODUyZi1hNGZkLTRhZTgtOWRmYy1hYzM1NzhmYzViMjEiLCJsZXZlbCI6IkwyIiwiaWF0IjoxNjk2NTExNDI1LCJleHAiOjE3OTY1MTE0NDAsImF1ZCI6ImxvY2FsaG9zdCIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9tb2Nrcy9zZWxmY2FyZSIsImp0aSI6IjUyMjE2OTkyLTY3MGEtNDUzYi1hYTVmLWU4NmI0ZGM3OGM3YSIsIm9yZ2FuaXphdGlvbiI6eyJpZCI6Ijc0ZGFlZmRhLTdlNzItNDZlMi04MTVhLWIyNmQzYmY5ODk4OCIsIm5hbWUiOiJDb211bmUgZGkgQ2lzdGVybmlubyIsInJvbGVzIjpbeyJwYXJ0eVJvbGUiOiJERUxFR0FURSIsInJvbGUiOiJhZG1pbiJ9XSwic3ViVW5pdENvZGUiOm51bGwsInN1YlVuaXRUeXBlIjoiRUMiLCJhb29QYXJlbnQiOm51bGwsInBhcmVudERlc2NyaXB0aW9uIjpudWxsLCJyb290UGFyZW50Ijp7ImlkIjpudWxsLCJkZXNjcmlwdGlvbiI6bnVsbH0sImZpc2NhbF9jb2RlIjoiODEwMDE0NzA3NDkiLCJpcGFDb2RlIjoiY19jNzQxIn0sImRlc2lyZWRfZXhwIjoxNjk2NTQzNzczfQ.raB5wxcW-GqsyvYN151qL4FvX-0se--OwDyWOFZ6qjkSvLjHdXW2VhaDLM1bt-KI2GE_ytXq-WmsMH9ZtmkAbV9BqjrtgxavnPxnWrH9PlabccFfssaUpR2pdpMExV4Lkl0qykNIvW2dUV72Hua4nMutG8I5Gb5ON24yn5ISisTe8x7R1vfDhAYKRs86Jx_vKpWAcGuyTAe1NZWN3yefxTt5_589bPvNq9htYT4DtJkLQQSxBi25Tv-O6ap_L40eMK0HHbi0r62NZ-cl_kZ5oX0Rf5WUAcLcrLuCXTxXNgqaIFlqlqoFsqxYtgXQYqJhB3vLfN6f6CiTZxeXDiA8bA";
export const aMockedChangeInstitutionIdentityToken =
  "eyJraWQiOiJkNDoxZDo4YzpkOTo4ZjowMDpiMjowNDplOTo4MDowOTo5ODplYzpmODo0Mjo3ZSIsInR5cCI6IkpXVCIsImFsZyI6IlJTMjU2In0.eyJlbWFpbCI6Im0uY3VyaWVAdGVzdC5lbWFpbC5pdCIsImZhbWlseV9uYW1lIjoiQ3VyaWUiLCJmaXNjYWxfbnVtYmVyIjoiQ1JVTVJBNzZTNThBOTQ0ViIsIm5hbWUiOiJNYXJpZSIsImZyb21fYWEiOmZhbHNlLCJ1aWQiOiIyYjEwODUyZi1hNGZkLTRhZTgtOWRmYy1hYzM1NzhmYzViMjEiLCJsZXZlbCI6IkwyIiwiaWF0IjoxNjk2NTExNDI1LCJleHAiOjE3OTY1MTE0NDAsImF1ZCI6ImxvY2FsaG9zdCIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9tb2Nrcy9zZWxmY2FyZSIsImp0aSI6IjUyMjE2OTkyLTY3MGEtNDUzYi1hYTVmLWU4NmI0ZGM3OGM3YSIsIm9yZ2FuaXphdGlvbiI6eyJpZCI6Ijc0ZGFlZmRhLTdlNzItNDZlMi04MTVhLWIyNmQzYmY5ODk4OSIsIm5hbWUiOiJDb211bmUgZGkgUm9tYSIsInJvbGVzIjpbeyJwYXJ0eVJvbGUiOiJERUxFR0FURSIsInJvbGUiOiJvcGVyYXRvciJ9XSwic3ViVW5pdENvZGUiOm51bGwsInN1YlVuaXRUeXBlIjoiRUMiLCJhb29QYXJlbnQiOm51bGwsInBhcmVudERlc2NyaXB0aW9uIjpudWxsLCJyb290UGFyZW50Ijp7ImlkIjpudWxsLCJkZXNjcmlwdGlvbiI6bnVsbH0sImZpc2NhbF9jb2RlIjoiODEwMDE0NzA3NDAiLCJpcGFDb2RlIjoiY19jNzQyIn0sImRlc2lyZWRfZXhwIjoxNjk2NTQzNzczfQ.AfCRgifU_mYTVDQXtL3TGr9wTtO3s1dV7XA6EQQeaAqfjiyiSMGuWQybaJkJjCDs3jRCVHSfu2x_nPOUchrs65vBzitqUcOY3js9VZAl2Q3666RKPXi2PrRSBZF_n2ry38feNTFAB4EwXPCN0LUarZdlp2-PmXxtvDiJtoZdG4d_L7tiMpxWxwzZfnCamqR0IGNbaAyu2jJ_BQLFLOXDTyt6wj2gHNhjUV6K5o5jeLttNchPrGfU1loN_4vJpd8wdNf7M-_W7nOTEI8wIvEzNK-wQ3EJpYfRj1TmOtVFEoaQxIl-CizfKD1J8u0VrQdN2NNwt1t8YJdtV_Gkx_aX4w";
export const aMockedAggregatorInstitutionIdentityToken =
  "eyJraWQiOiJkNDoxZDo4YzpkOTo4ZjowMDpiMjowNDplOTo4MDowOTo5ODplYzpmODo0Mjo3ZSIsInR5cCI6IkpXVCIsImFsZyI6IlJTMjU2In0.eyJlbWFpbCI6Im0uY3VyaWVAdGVzdC5lbWFpbC5pdCIsImZhbWlseV9uYW1lIjoiQ3VyaWUiLCJmaXNjYWxfbnVtYmVyIjoiQ1JVTVJBNzZTNThBOTQ0ViIsIm5hbWUiOiJNYXJpZSIsImZyb21fYWEiOmZhbHNlLCJ1aWQiOiIyYjEwODUyZi1hNGZkLTRhZTgtOWRmYy1hYzM1NzhmYzViMjEiLCJsZXZlbCI6IkwyIiwiaWF0IjoxNjk2NTExNDI1LCJleHAiOjE3OTY1MTE0NDAsImF1ZCI6ImxvY2FsaG9zdCIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9tb2Nrcy9zZWxmY2FyZSIsImp0aSI6IjUyMjE2OTkyLTY3MGEtNDUzYi1hYTVmLWU4NmI0ZGM3OGM3YSIsIm9yZ2FuaXphdGlvbiI6eyJpZCI6Ijc0Z2RwZmRhLTdlNzItNDZlMi04MTVhLWIyNmQzYmY5ODEyMyIsIm5hbWUiOiJDb211bmUgZGkgQmFyaSIsInJvbGVzIjpbeyJwYXJ0eVJvbGUiOiJERUxFR0FURSIsInJvbGUiOiJhZG1pbiJ9XSwic3ViVW5pdENvZGUiOm51bGwsInN1YlVuaXRUeXBlIjoiRUMiLCJhb29QYXJlbnQiOm51bGwsInBhcmVudERlc2NyaXB0aW9uIjpudWxsLCJyb290UGFyZW50Ijp7ImlkIjpudWxsLCJkZXNjcmlwdGlvbiI6bnVsbH0sImZpc2NhbF9jb2RlIjoiODEwMDE0NzA3NDkiLCJpcGFDb2RlIjoiY19jNzQxIn0sImRlc2lyZWRfZXhwIjoxNjk2NTQzNzczfQ.vaYnCeaIr-UP6UbYHA5YC0RBXB8-15T4YE-MSwZoIzKernJDBI7Tpgynw4uHeb5idw3tYeoicUqcGPAJzB6xMmwuMa4zp8iszc9H1JafCn68fd4zz1mQBnw3ScSnB_bNgj6ZC2prnZ7EuVLPx_q6hIPYAvnH0YmyqYOpEZc973E5ETY8ZNiA2JuthiITp-_w8XSWOXHtYycJiDUWT84FabFmelvXhg1LnymR-jHSXQHtI6q2KasmUUHKAYD1KaIkUpHI7-S05OZq1G6uSkrZoNiSLMmRFCIPCGK4j4PbPsmT9p313YyeYc4zyEmS4c2l9wvDO7ztAu2dgS6gSdknZQ";
export const aMockedAggregatorInstitutionOperatorIdentityToken =
  "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im0uY3VyaWVAdGVzdC5lbWFpbC5pdCIsImZhbWlseV9uYW1lIjoiQ3VyaWUiLCJmaXNjYWxfbnVtYmVyIjoiQ1JVTVJBNzZTNThBOTQ0ViIsIm5hbWUiOiJNYXJpZSIsImZyb21fYWEiOmZhbHNlLCJ1aWQiOiIyYjEwODUyZi1hNGZkLTRhZTgtOWRmYy1hYzM1NzhmYzViMjEiLCJsZXZlbCI6IkwyIiwiaWF0IjoxNjk2NTExNDI1LCJleHAiOjE3OTY1MTE0NDAsImF1ZCI6ImxvY2FsaG9zdCIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9tb2Nrcy9zZWxmY2FyZSIsImp0aSI6IjUyMjE2OTkyLTY3MGEtNDUzYi1hYTVmLWU4NmI0ZGM3OGM3YSIsIm9yZ2FuaXphdGlvbiI6eyJpZCI6Ijc0Z2RwZmRhLTdlNzItNDZlMi04MTVhLWIyNmQzYmY5ODEyMyIsIm5hbWUiOiJDb211bmUgZGkgQmFyaSIsInJvbGVzIjpbeyJwYXJ0eVJvbGUiOiJERUxFR0FURSIsInJvbGUiOiJvcGVyYXRvciJ9XSwic3ViVW5pdENvZGUiOm51bGwsInN1YlVuaXRUeXBlIjoiRUMiLCJhb29QYXJlbnQiOm51bGwsInBhcmVudERlc2NyaXB0aW9uIjpudWxsLCJyb290UGFyZW50Ijp7ImlkIjpudWxsLCJkZXNjcmlwdGlvbiI6bnVsbH0sImZpc2NhbF9jb2RlIjoiODEwMDE0NzA3NDkiLCJpcGFDb2RlIjoiY19jNzQxIiwiZ3JvdXBzIjpbImFiYzEyMyJdfSwiZGVzaXJlZF9leHAiOjE2OTY1NDM3NzN9.HTqtScTADaEy2MFd-pkFgSA0bE0EXKLeAq6No5ySGZpzEhvDaioqmbpt4dRkBa9M6qmKlkTR-wBQQPdqlgnxp6W1BvK80SrIIhxSTpLKUowvgEPoPkkgPhaFF1h1E3ejWaAdTuyUgMAJ2AZa_8qKZ3QKrOLejV0boZIjrbyoW_mPiMJ_SYyBXeGht14F0ZsQImNPuLTdYlI05NapmCoqfxatIwunzFBitfegDRBSIhkpRmDSE_CYTWbd9Ly1Bd7DaSy48-LiVAkeGaTMThfTbTGx_nPxcRFuijcsBlN3FJzeoclaQEXiulhF97eRVPilSY8_2hehq7bdwASZFFmMCg";

/** `institutionId` used in `aMockedAggregatorInstitutionIdentiyToken` */
const aMockedAggregatorInstitutionId = "74gdpfda-7e72-46e2-815a-b26d3bf98123";

export const aWellKnown = {
  keys: [
    {
      alg: "RS256",
      e: "AQAB",
      kid: "d4:1d:8c:d9:8f:00:b2:04:e9:80:09:98:ec:f8:42:7e",
      kty: "RSA",
      n: "wxSYmYWPK7uoltGPLr8Pmo_atz0qjMY53M6pR43aPGNjSrpzU2HtTcgfdmm8P6Ckz5lCCVH5Zvk6YM09PQL7kavN994Z2Dr88xsGmGAKQAMN7KKjVZeHx6AFKvz4W9Q4IGmhNSxCNyVqiWPOp9AkME_H7RxaZfB5Cil9rrXb2d0hd9TrkB_QcQlmQxKV9jX0SXJ3HhnklwgQCNeL62OjoxHOydJwN5EV4XoXh0McKn1lLZFX4FsW2fpiKVnNC63Puu2SMk2qs_IoSzVVQ3EucmvnfKiDWj_lcdYvo1s1q3_3BTMFvfHsO5h8rowh8a2U5b_JmiN_ksZHeVg0Kdmquw",
      use: "sig",
    },
  ],
};

export const aMockCurrentUserAuthorizedInstitution = {
  id: "74daefda-7e72-46e2-815a-b26d3bf98988",
  logo_url: "",
  name: "Comune di Cisternino",
  role: "admin",
};

export const getMockUserAuthorizedInstitution = () => ({
  id: faker.string.uuid(),
  logo_url: "",
  name: faker.company.name(),
  role: faker.helpers.arrayElement(["admin", "operator"]),
});

export const getMockUserInstitution = (userId?: string) => ({
  id: faker.string.uuid(),
  institutionDescription: faker.company.name(),
  institutionId: faker.string.uuid(),
  institutionRootName: faker.company.name(),
  logo: faker.image.url(),
  products: [
    {
      createdAt: faker.date.past().toISOString(),
      env: "ROOT",
      productId: faker.string.alphanumeric({ length: { max: 10, min: 5 } }),
      productRole: faker.helpers.arrayElement(["admin", "operator"]),
      role: "SUB_DELEGATE",
      status: "ACTIVE",
    },
  ],
  userId: userId ?? faker.string.uuid(),
  userMailUuid: faker.string.uuid(),
});

export const getMockInstitution = (institutionId?: string) => ({
  address: faker.location.streetAddress(true),
  aooParentCode: faker.string.numeric(5),
  attributes: [
    {
      code: faker.lorem.slug(1),
      description: faker.lorem.slug(1),
      origin: faker.lorem.slug(1),
    },
  ],
  businessRegisterPlace: faker.lorem.slug(1),
  dataProtectionOfficer: {
    address: faker.location.streetAddress(true),
    email: faker.internet.email(),
    pec: faker.internet.email(),
  },
  description: faker.company.name(),
  digitalAddress: faker.internet.email(),
  externalId: faker.string.numeric(11),
  geographicTaxonomies: [
    {
      code: faker.location.countryCode(),
      desc: faker.location.state(),
    },
    {
      code: faker.location.countryCode(),
      desc: faker.location.state(),
    },
  ],
  id: institutionId ?? faker.string.uuid(),
  imported: faker.datatype.boolean(),
  institutionType: faker.helpers.arrayElement([
    "GSP",
    "PA",
    "PG",
    "PSP",
    "PT",
    "SCP",
    "SA",
  ]),
  logo: faker.image.url(),
  onboarding: [
    {
      isAggregator: institutionId === aMockedAggregatorInstitutionId,
      productId: "prod-io",
      status: "ACTIVE",
    },
  ],
  origin: "SELC",
  originId: faker.string
    .alphanumeric({ length: { max: 10, min: 5 } })
    .toUpperCase(),
  paymentServiceProvider: {
    abiCode: faker.string.numeric(5),
    businessRegisterNumber: faker.string.numeric(10),
    legalRegisterName: faker.company.name(),
    legalRegisterNumber: faker.string.numeric(8),
    vatNumberGroup: faker.datatype.boolean(),
  },
  rea: faker.lorem.slug(1),
  rootParent: {
    description: faker.company.name(),
    id: faker.string.uuid(),
  },
  shareCapital: faker.lorem.slug(1),
  subunitCode: faker.string.numeric(5),
  subunitType: faker.lorem.slug(1),
  supportEmail: faker.internet.email(),
  supportPhone: faker.phone.number(),
  taxCode: faker.string.numeric(11),
  zipCode: faker.location.zipCode(),
});

export const getMockInstitutionGroups = (_institutionId?: string) => ({
  groups: Array.from(Array(faker.number.int({ max: 10, min: 1 }))).map(
    (_, index) =>
      getMockManageSubscriptionGroup(index === 0 ? "abc123" : undefined),
  ),
});

export const getMockManageSubscriptionGroup = (id?: string) => ({
  id: id ?? faker.string.uuid(),
  name: faker.word.words({ count: { max: 3, min: 1 } }),
  state: faker.helpers.arrayElement(["ACTIVE", "SUSPENDED", "DELETED"]),
});

export const getSelfCareProblemResponse = (status: number) => ({
  detail: faker.lorem.slug(5),
  instance: faker.lorem.slug(1),
  invalidParams: [
    {
      name: faker.lorem.slug(1),
      reason: faker.lorem.slug(1),
    },
  ],
  status,
  title: faker.lorem.slug(5),
  type: faker.lorem.slug(1),
});

export const getMockInstitutionProducts = (_institutionId?: string) => [
  {
    contractTemplatePath: "path/to/contractTemplatePath",
    contractTemplateVersion: "1.0.0",
    createdAt: new Date("2019-08-24T14:15:22Z"),
    depictImageUrl: "https://depictImageUrl",
    description: "product IO",
    id: "prod-io",
    identityTokenAudience: "identityTokenAudience",
    logo: "https://logo",
    logoBgColor: "logoBgColor",
    parentId: "parentId",
    roleManagementURL: "https://roleManagementURL",
    roleMappings: {
      property1: {
        multiroleAllowed: true,
        phasesAdditionAllowed: ["phase1"],
        roles: [
          {
            code: "code1",
            description: "description1",
            label: "label1",
            productLabel: "productLabel1",
          },
        ],
        skipUserCreation: true,
      },
      property2: {
        multiroleAllowed: true,
        phasesAdditionAllowed: ["phase2"],
        roles: [
          {
            code: "code2",
            description: "description2",
            label: "label2",
            productLabel: "productLabel2",
          },
        ],
        skipUserCreation: true,
      },
    },
    title: "IO",
    urlBO: "urlBO",
    urlPublic: "urlPublic",
  },
  {
    contractTemplatePath: "path/to/contractTemplatePath",
    contractTemplateVersion: "1.0.0",
    createdAt: new Date("2019-08-24T14:15:22Z"),
    depictImageUrl: "https://depictImageUrl",
    description: "product description",
    id: "prod-1",
    identityTokenAudience: "identityTokenAudience",
    logo: "https://logo",
    logoBgColor: "logoBgColor",
    parentId: "parentId",
    roleManagementURL: "https://roleManagementURL",
    roleMappings: {
      property1: {
        multiroleAllowed: true,
        phasesAdditionAllowed: ["phase1"],
        roles: [
          {
            code: "code1",
            description: "description1",
            label: "label1",
            productLabel: "productLabel1",
          },
        ],
        skipUserCreation: true,
      },
      property2: {
        multiroleAllowed: true,
        phasesAdditionAllowed: ["phase2"],
        roles: [
          {
            code: "code2",
            description: "description2",
            label: "label2",
            productLabel: "productLabel2",
          },
        ],
        skipUserCreation: true,
      },
    },
    title: "product title 1",
    urlBO: "urlBO",
    urlPublic: "urlPublic",
  },
];
